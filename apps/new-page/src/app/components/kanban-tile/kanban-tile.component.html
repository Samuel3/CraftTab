<div id="container" [class.edit-mode]="editMode">
  <div class="header">
    <h1>{{ this.name }}</h1>
    <button class="edit-btn" (click)="editMode = !editMode">
      {{ editMode ? 'Fertig' : 'Bearbeiten' }}
    </button>
  </div>

  <div class="kanban-board">
    <div class="kanban-columns"
         cdkDropList
         [cdkDropListData]="columns"
         cdkDropListOrientation="horizontal"
         (cdkDropListDropped)="dropColumn($event)">
      <div class="kanban-column" *ngFor="let column of columns"
           cdkDrag
           [cdkDragDisabled]="!editMode">
        <div class="column-content">
          <div class="column-header" cdkDragHandle>
            <div class="drag-handle" *ngIf="editMode">
              <span>⋮⋮</span>
            </div>
            <h3 *ngIf="!editMode">{{ column.title }}</h3>
            <div *ngIf="editMode" class="edit-column-header">
              <input [value]="column.title"
                     (change)="updateColumnTitle(column, $event)"
                     placeholder="Spaltentitel">
              <button class="delete-column-btn"
                      (click)="deleteColumn(column)"
                      aria-label="Spalte löschen">×</button>
            </div>
          </div>
          <div class="tickets-container"
               cdkDropList
               [cdkDropListData]="column.tickets"
               (cdkDropListDropped)="drop($event)"
          >
            <div class="ticket" *ngFor="let ticket of column.tickets" cdkDrag>
              <div class="ticket-content" cdkDragHandle>
                <span>{{ ticket.title }}</span>
                <button class="delete-btn"
                        (click)="deleteTicket(column, ticket)"
                        aria-label="Ticket löschen">×</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="actions">
    <button class="add-ticket-btn"
            (click)="openAddTicketDialog()"
            *ngIf="!editMode">+ Neues Ticket</button>

    <div class="add-column-form" *ngIf="editMode">
      <input [(ngModel)]="newColumnTitle"
             placeholder="Neuer Spaltentitel"
             (keyup.enter)="addColumn()">
      <button (click)="addColumn()">+ Neue Spalte</button>
    </div>
  </div>
</div>
